"use strict";(function(){var d={id:"causata-transport",name:"Causata Transport Plugin",version:0.1,vendor:"Causata Inc",type:"data-transport"},f=["page-view","product-view","authentication","checkout","site-search","nat-search-ref"],c={server:null,account:null},b=[],g=false,a=function(n,m,l){if(/-source$/.test(m)||(m==="page-referrer"&&l==="")){return;}var k=typeof l,j;if("string"===k||"number"===k){n.push({name:m,value:l});}else{if(jsHub.util.isArray(l)){for(j=0;j<l.length;j++){a(n,m,l[j]);}}}},e=function(){if(typeof c.server!=="string"){jsHub.trigger("plugin-error",{message:"Server hostname not specified",source:d.id});return;}var m,n,k,o,l;var j={sender:d.name+" v"+d.version,event:[]};for(m=0;m<b.length;m++){n=b[m];k={timestamp:n.timestamp,eventType:n.type};if(typeof c.account==="string"){k.organization=c.account;}l=[];for(o in n.data){if(n.data.hasOwnProperty(o)){a(l,o,n.data[o]);}}if(l.length>0){k.attributes=l;}j.event.push(jsHub.json.stringify(k));}b=[];var p=(("https:"===jsHub.safe("document").location.protocol)?"https://":"http://");jsHub.dispatchViaForm("POST",p+c.server,j);};jsHub.trigger("plugin-initialization-start",d);d.eventHandler=function h(l){if(l.type==="data-capture-start"){g=true;}if(l.type==="data-capture-complete"){g=false;e();}var k=false;if(""+l.data["custom-event"]==="true"){k="custom";}else{for(var j=0;j<f.length;j++){if(f[j]===l.type){k="standard";break;}}}if(k){b.push(l);if(!g){e();}}};d.configure=function(i,j){c[i]=""+j;};jsHub.bind("*",d);jsHub.trigger("plugin-initialization-complete",d);})();