"use strict";YUI.add("hpage-capture",function(a){(function(c){var b={name:"hPage Microformat Parser Plugin",id:"hPage-plugin",version:0.1,vendor:"jsHub.org",type:"microformat"};jsHub.trigger("plugin-initialization-start",b);var d=function d(j){jsHub.trigger("hpage-parse-start",j);var f,i,g,e,h;f=jsHub.logger;if(j&&j.data&&j.data.context){i=j.data.context;}g=c(".hpage",i);g=g.not(g.find(".hpage"));e={};h={".name":"page-name",".title":"page-title",".referrer":"page-referrer",".type":"page-type",".fragment":"page-fragment"};g.each(function(k,q){var o={};var l=c(q);c.each(h,function(u,r){var s,t;s=l.find(u);s=s.not(s.find(".hpage"));t=s.getMicroformatPropertyValue(true);if(t!==null){o[r]=t;o[r+"-source"]=b.id;}});c.extend(true,e,o);var n=[],p=c(".category",q);p=p.not(p.find(".hpage .category"));n=p.excerptMultipleValues();if(n!==null){o["page-category"]=n;o["page-category-source"]=b.id;e["page-category"]=(e["page-category"]||[]);c.each(n,function(r,s){if(c(e["page-category"]).index(s)===-1){e["page-category"].push(s);}});}var m=c(".attribute",q);m.each(function(){var u=c(this).excerptValueClassData(),t,v,r;if(u!==null){t=u.type;v=u.value;e.attributes=(e.attributes||{});r=c.makeArray(e.attributes[t]);c.merge(r,c.makeArray(v));var w=[];for(var s=0;s<r.length;s++){if(c.inArray(r[s],w)===-1){w.push(r[s]);}}if(w.length===1){w=r[0];}e.attributes[t]=w;}});jsHub.trigger("hpage-node-found",{count:k+1,element:q,data:o});});if(e["page-name"]){jsHub.trigger("hpage-found",{context:i,hpage:e});}else{e=null;}jsHub.trigger("hpage-parse-complete");return e;};jsHub.bind("page-view",b.id,d);jsHub.bind("content-updated",b.id,d);jsHub.trigger("plugin-initialization-complete",b);})(jQuery);},"2.0.0",{requires:["microformats"],after:["microformats"]});