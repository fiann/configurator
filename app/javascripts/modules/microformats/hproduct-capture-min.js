"use strict";YUI.add("hproduct-capture",function(a){(function(c){var b={name:"hProduct Microformat Parser Plugin",id:"hProduct-plugin",version:0.1,vendor:"jsHub.org",type:"microformat"};jsHub.trigger("plugin-initialization-start",b);var d=function d(i){jsHub.trigger("hproduct-parse-start",i);var e,h,f,k,j;e=jsHub.logger;if(i&&i.data&&i.data.context){h=i.data.context;}if(i.timestamp){j=i.timestamp;}f=c(".hproduct",h);f=f.not(f.find(".hproduct"));k={products:[]};var g={".brand":"product-brand",".category":"product-category",".description":"product-description",".fn":"product-name",".product-id":"product-id",".price":"product-price"};f.each(function(l,r){var o={};var m=c(r);c.each(g,function(v,s){var t,u;t=m.find(v);t=t.not(t.find(".hproduct"));u=t.getMicroformatPropertyValue(true);if(u!==null){o[s]=u;}});var n=c(".attribute",r);n.each(function(){var v=c(this).excerptValueClassData(),u,w,s;if(v!==null){u=v.type;w=v.value;o.attributes=(o.attributes||{});s=c.makeArray(o.attributes[u]);c.merge(s,c.makeArray(w));var x=[];for(var t=0;t<s.length;t++){if(c.inArray(s[t],x)===-1){x.push(s[t]);}}if(x.length===1){x=s[0];}o.attributes[u]=x;}});var q=c("img.photo",r);q.each(function(){var s=c(this).attr("src");if(s!==null){o["product-photo"]=c.makeArray(o["product-photo"]);o["product-photo"].push(s);if(o["product-photo"].length===1){o["product-photo"]=o["product-photo"][0];}}});var p=c("a.url",r);p.each(function(){var s=c(this).attr("href");if(s!==null){o["product-url"]=c.makeArray(o["product-url"]);o["product-url"].push(s);if(o["product-url"].length===1){o["product-url"]=o["product-url"][0];}}});jsHub.trigger("hproduct-data-found",{count:l+1,element:r,data:o});jsHub.trigger("product-view",o,j);k.products.push(o);});jsHub.trigger("hproduct-parse-complete",k);return;};jsHub.bind("page-view",b.id,d);jsHub.bind("content-updated",b.id,d);jsHub.trigger("plugin-initialization-complete",b);})(jQuery);},"2.0.0",{requires:["microformats"],after:["microformats"]});